+++
title = "Introducing MIX Browser"
description = 'MIX is a content publication platform, therefore a key component is a browser to be able to view any item and to serve as a reference implementation for other software to follow.'
date = 2017-12-19
draft = false
template = "blog/page.html"

[taxonomies]
authors = ["Jonathan Brown"]

[extra]
+++

*Originally published at [medium.com](https://medium.com/mix-blockchain/introducing-mix-browser-47e09b43c131)*

<img src="/blog/introducing-mix-browser.jpeg" style="width: 100%; height: auto;">

</figure><p id="6583" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">MIX is a content publication platform, therefore a key component is a browser to be able to view any item and to serve as a reference implementation for other software to follow.</p><p id="d668" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">I have just implemented an initial version of the <a class="af nl" href="https://github.com/mix-blockchain/mix-browser" rel="noopener ugc nofollow" target="_blank">MIX Browser</a>. This is what the “address bar” looks like:</p>

<img src="/blog/item-id-field.png" style="width: 100%; height: auto;">

<p id="c72e" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">Each MIX content item has a 32 byte itemId. This can be pasted into the itemId field. Once “Go” is pressed the browser will retrieve the content:</p>

<img src="/blog/item-id-inspect.png" style="width: 100%; height: auto;">

<p id="7cc0" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">First of all it determines which Item Store contract is managing the item by passing the itemId to the getItemStore() method in the <a class="af nl" href="https://github.com/mix-blockchain/mix-item-store/blob/master/src/item_store_registry.sol" rel="noopener ugc nofollow" target="_blank">Item Store Registry</a> contract. The first 8 bytes of the itemId is actually the last 8 bytes of the address of its Item Store contract.</p><p id="e2f1" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">Anyone can register a new Item Store contract, but the <a class="af nl" href="https://en.wikipedia.org/wiki/User_agent" rel="noopener ugc nofollow" target="_blank">user agent</a> must be hard-coded to know how to interact with it. Currently there is only one Item Store contract: <a class="af nl" href="https://github.com/mix-blockchain/mix-item-store/blob/master/src/item_store_ipfs_sha256.sol" rel="noopener ugc nofollow" target="_blank">Item Store IPFS SHA256</a>. This Item Store stores each revision as an <a class="af nl" href="https://ipfs.io/" rel="noopener ugc nofollow" target="_blank">IPFS</a> SHA256 hash.</p><p id="4289" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">MIX Browser then calls the itemStoreIpfsSha256.getItem() method to get all the information about the item that is stored in the contract’s state:</p><ul class=""><li id="eb15" class="mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk ns nt nu bj" data-selectable-paragraph="">Flags: each item can have the following flags set:<br>- Updatable: item revisions can be changed.<br>- Enforce revisions: revisions cannot be changed or deleted, only new revisions can be added.<br>- Retractable: it is possible to retract the item in its entirety. This is not affected by the updatable or enforce revisions flags.<br>- Transferable: the item ownership can be transferred to a willing receiver or set as unowned.</li><li id="213f" class="mn mo fr mp b mq nv ms mt mu nw mw mx my nx na nb nc ny ne nf ng nz ni nj nk ns nt nu bj" data-selectable-paragraph="">Owner: the address of the account that owns this item. Only the owner can change the item’s content, owner or flags.</li><li id="9592" class="mn mo fr mp b mq nv ms mt mu nw mw mx my nx na nb nc ny ne nf ng nz ni nj nk ns nt nu bj" data-selectable-paragraph="">Revision count: how many revisions this item has.</li><li id="59b7" class="mn mo fr mp b mq nv ms mt mu nw mw mx my nx na nb nc ny ne nf ng nz ni nj nk ns nt nu bj" data-selectable-paragraph="">Revision IPFS hashes: IPFS hash of each revision.</li><li id="f055" class="mn mo fr mp b mq nv ms mt mu nw mw mx my nx na nb nc ny ne nf ng nz ni nj nk ns nt nu bj" data-selectable-paragraph="">Revision timestamps: the creation timestamp of each revision.</li><li id="ef9d" class="mn mo fr mp b mq nv ms mt mu nw mw mx my nx na nb nc ny ne nf ng nz ni nj nk ns nt nu bj" data-selectable-paragraph="">Parent itemIds: when an item is created it can specify any number of parent items. The meaning of a parent is context specific and can be implied or specified in the content itself. Examples of what a parent can mean are: feed the item is published in, item being replied to, or item being retweeted / quoted.</li><li id="74bd" class="mn mo fr mp b mq nv ms mt mu nw mw mx my nx na nb nc ny ne nf ng nz ni nj nk ns nt nu bj" data-selectable-paragraph="">Child itemIds: any items that have declared this item as a parent are listed here.</li></ul><p id="f8e3" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">Currently MIX Browser only reads the first revision. The 32 byte IPFS hash of the revision is converted into a <a class="af nl" href="https://en.wikipedia.org/wiki/Base58" rel="noopener ugc nofollow" target="_blank">Base58</a>-encoded <a class="af nl" href="https://github.com/multiformats/multihash" rel="noopener ugc nofollow" target="_blank">Multihash</a> so the content can be retrieved from IPFS.</p><p id="0881" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">MIX uses <a class="af nl" href="https://developers.google.com/protocol-buffers/" rel="noopener ugc nofollow" target="_blank">Protocol Buffers</a> to encode the content. Content from the storage layer (IPFS) is decoded using the ItemWrapper message from <a class="af nl" href="https://github.com/mix-blockchain/mix-item-schema/blob/master/item.proto" rel="noopener ugc nofollow" target="_blank">MIX item schema</a>. Among other things, this message declares which compression algorithm is used to compress the payload. Currently MIX uses <a class="af nl" href="https://en.wikipedia.org/wiki/DEFLATE" rel="noopener ugc nofollow" target="_blank">DEFLATE</a>, but <a class="af nl" href="https://en.wikipedia.org/wiki/Brotli" rel="noopener ugc nofollow" target="_blank">Brotli</a> will replace it once a suitable JavaScript library is available.</p><p id="6966" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">The uncompressed payload is then decoded using the Item message. This produces an array of pairs of <a class="af nl" rel="noopener" href="/mix-blockchain/update-to-the-link-content-system-mixins-e2212ae06f73">mixi</a>nIds and mixin content.</p><p id="3f98" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">Content items can be composed of any number of mixins, but the first mixin is considered to be the content type for the item as a whole.</p><p id="5542" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">Example mixins are Video, Title, Description, Tags, Geolocation, Licence, Recording date, Language, Item derived from.</p><p id="482c" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">Each mixin type has a MIX content item that includes the Protocol Buffers schema that defines how it is encoded.</p><p id="32f2" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">Mixin types are registered with the <a class="af nl" href="https://github.com/mix-blockchain/mix-mixin-registry/blob/master/src/mixin_registry.sol" rel="noopener ugc nofollow" target="_blank">Mixin Registry</a> contract to obtain a permanent integer mixinId.</p><p id="dbf9" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">Currently MIX Browser can only render mixins of type “Mixin”, that is, content that defines how different mixin types are encoded. It decodes the three fields: Name, Description and Protocol Buffers schema, and displays them as shown in the screenshot above.</p><p id="e846" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">I appreciate this is a little bit complicated — I am having an infographic produced to make it easier to understand.</p><p id="5a28" class="pw-post-body-paragraph mn mo fr mp b mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk fk bj" data-selectable-paragraph="">UPDATE: the infographic is now produced:</p>

<img src="/mix-item-infographic.svg" style="width: 100%; height: auto;">

</div></div></div></div></section></div></div></article><div class="ab ca"><div class="ch bg ew ex ey ez"></div></div>
